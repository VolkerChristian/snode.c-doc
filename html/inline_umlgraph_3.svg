<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1138px" preserveAspectRatio="none" style="width:1506px;height:1138px;" version="1.1" viewBox="0 0 1506 1138" width="1506px" zoomAndPan="magnify"><defs><filter height="300%" id="f1v8lkba356yk4" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#f1v8lkba356yk4)" height="758.5781" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="97" y="102.0234"/><rect fill="#FFFFFF" filter="url(#f1v8lkba356yk4)" height="56.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="102" y="706.3359"/><rect fill="#FFFFFF" filter="url(#f1v8lkba356yk4)" height="157.3984" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="97" y="889.7344"/><rect fill="#FFFFFF" filter="url(#f1v8lkba356yk4)" height="715.4453" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="384" y="131.1563"/><rect fill="#FFFFFF" filter="url(#f1v8lkba356yk4)" height="657.3125" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="389" y="168.2891"/><rect fill="#FFFFFF" filter="url(#f1v8lkba356yk4)" height="280.5234" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="394" y="511.0781"/><rect fill="#FFFFFF" filter="url(#f1v8lkba356yk4)" height="603.1797" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="627" y="202.4219"/><rect fill="#FFFFFF" filter="url(#f1v8lkba356yk4)" height="235.2578" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="855" y="231.5547"/><rect fill="#FFFFFF" filter="url(#f1v8lkba356yk4)" height="101.7266" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="860" y="292.8203"/><rect fill="#FFFFFF" filter="url(#f1v8lkba356yk4)" height="121.8594" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1179.5" y="540.2109"/><rect fill="#FFFFFF" filter="url(#f1v8lkba356yk4)" height="114.2656" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1313" y="918.8672"/><rect fill="#FFFFFF" filter="url(#f1v8lkba356yk4)" height="25" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1318" y="980.1328"/><rect fill="#FFFFFF" filter="url(#f1v8lkba356yk4)" height="192.125" style="stroke: #000000; stroke-width: 2.0;" width="471.5" x="786.5" y="246.5547"/><rect fill="#FFFFFF" filter="url(#f1v8lkba356yk4)" height="78.7266" style="stroke: #000000; stroke-width: 2.0;" width="384" x="1111" y="555.2109"/><rect fill="#FFFFFF" filter="url(#f1v8lkba356yk4)" height="86.2656" style="stroke: #000000; stroke-width: 2.0;" width="182" x="1248" y="933.8672"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="102" x2="102" y1="70.8906" y2="1065.1328"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="389" x2="389" y1="70.8906" y2="1065.1328"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="631.5" x2="631.5" y1="70.8906" y2="1065.1328"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="859.5" x2="859.5" y1="70.8906" y2="1065.1328"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1184" x2="1184" y1="346.6172" y2="1065.1328"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1318" x2="1318" y1="613.1406" y2="1065.1328"/><rect fill="#FEFECE" filter="url(#f1v8lkba356yk4)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="142" x="29" y="35.5938"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="128" x="36" y="55.5889">SocketConnection</text><rect fill="#FEFECE" filter="url(#f1v8lkba356yk4)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="142" x="29" y="1064.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="128" x="36" y="1084.1279">SocketConnection</text><rect fill="#FEFECE" filter="url(#f1v8lkba356yk4)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="116" x="329" y="35.5938"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="102" x="336" y="55.5889">SocketContext</text><rect fill="#FEFECE" filter="url(#f1v8lkba356yk4)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="116" x="329" y="1064.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="102" x="336" y="1084.1279">SocketContext</text><rect fill="#FEFECE" filter="url(#f1v8lkba356yk4)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="85" x="587.5" y="35.5938"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="71" x="594.5" y="55.5889">Response</text><rect fill="#FEFECE" filter="url(#f1v8lkba356yk4)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="85" x="587.5" y="1064.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="71" x="594.5" y="1084.1279">Response</text><rect fill="#FEFECE" filter="url(#f1v8lkba356yk4)" height="62.8906" style="stroke: #A80036; stroke-width: 1.5;" width="123" x="796.5" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="102" x="807" y="22.9951">SocketContext</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="109" x="803.5" y="39.292">UpgradeFactory</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="57" x="829.5" y="55.5889">Selector</text><rect fill="#FEFECE" filter="url(#f1v8lkba356yk4)" height="62.8906" style="stroke: #A80036; stroke-width: 1.5;" width="123" x="796.5" y="1064.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="102" x="807" y="1084.1279">SocketContext</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="109" x="803.5" y="1100.4248">UpgradeFactory</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="57" x="829.5" y="1116.7217">Selector</text><rect fill="#FEFECE" filter="url(#f1v8lkba356yk4)" height="46.5938" style="stroke: #A80036; stroke-width: 1.5;" width="123" x="1121" y="1064.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="102" x="1131.5" y="1084.1279">SocketContext</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="109" x="1128" y="1100.4248">UpgradeFactory</text><rect fill="#FEFECE" filter="url(#f1v8lkba356yk4)" height="46.5938" style="stroke: #A80036; stroke-width: 1.5;" width="116" x="1258" y="1064.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="102" x="1265" y="1084.1279">SocketContext</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="59" x="1286.5" y="1100.4248">Upgrade</text><rect fill="#FFFFFF" filter="url(#f1v8lkba356yk4)" height="758.5781" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="97" y="102.0234"/><rect fill="#FFFFFF" filter="url(#f1v8lkba356yk4)" height="56.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="102" y="706.3359"/><rect fill="#FFFFFF" filter="url(#f1v8lkba356yk4)" height="157.3984" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="97" y="889.7344"/><rect fill="#FFFFFF" filter="url(#f1v8lkba356yk4)" height="715.4453" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="384" y="131.1563"/><rect fill="#FFFFFF" filter="url(#f1v8lkba356yk4)" height="657.3125" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="389" y="168.2891"/><rect fill="#FFFFFF" filter="url(#f1v8lkba356yk4)" height="280.5234" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="394" y="511.0781"/><rect fill="#FFFFFF" filter="url(#f1v8lkba356yk4)" height="603.1797" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="627" y="202.4219"/><rect fill="#FFFFFF" filter="url(#f1v8lkba356yk4)" height="235.2578" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="855" y="231.5547"/><rect fill="#FFFFFF" filter="url(#f1v8lkba356yk4)" height="101.7266" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="860" y="292.8203"/><rect fill="#FFFFFF" filter="url(#f1v8lkba356yk4)" height="121.8594" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1179.5" y="540.2109"/><rect fill="#FFFFFF" filter="url(#f1v8lkba356yk4)" height="114.2656" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1313" y="918.8672"/><rect fill="#FFFFFF" filter="url(#f1v8lkba356yk4)" height="25" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1318" y="980.1328"/><polygon fill="#A80036" points="85,98.0234,95,102.0234,85,106.0234,89,102.0234" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="3" x2="91" y1="102.0234" y2="102.0234"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="75" x="10" y="96.9575">readEvent()</text><polygon fill="#A80036" points="372,127.1563,382,131.1563,372,135.1563,376,131.1563" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="107" x2="378" y1="131.1563" y2="131.1563"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="137" x="114" y="126.0903">onReceiveFromPeer()</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="394" x2="441" y1="155.2891" y2="155.2891"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="441" x2="441" y1="155.2891" y2="168.2891"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="400" x2="441" y1="168.2891" y2="168.2891"/><polygon fill="#A80036" points="410,164.2891,400,168.2891,410,172.2891,406,168.2891" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="83" x="406" y="150.2231">process data</text><polygon fill="#A80036" points="615,198.4219,625,202.4219,615,206.4219,619,202.4219" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="399" x2="621" y1="202.4219" y2="202.4219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="84" x="406" y="197.356">upgrade(req)</text><polygon fill="#A80036" points="843,227.5547,853,231.5547,843,235.5547,847,231.5547" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="637" x2="849" y1="231.5547" y2="231.5547"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="107" x="644" y="226.4888">select(req, *this)</text><path d="M786.5,246.5547 L1122.5,246.5547 L1122.5,253.5547 L1112.5,263.5547 L786.5,263.5547 L786.5,246.5547 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="192.125" style="stroke: #000000; stroke-width: 2.0;" width="471.5" x="786.5" y="246.5547"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="291" x="801.5" y="259.6216">Activate SocketContextUpgradeFactory</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="865" x2="912" y1="279.8203" y2="279.8203"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="912" x2="912" y1="279.8203" y2="292.8203"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="871" x2="912" y1="292.8203" y2="292.8203"/><polygon fill="#A80036" points="881,288.8203,871,292.8203,881,296.8203,877,292.8203" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="190" x="877" y="274.7544">select(upgradeContextName)</text><polygon fill="#A80036" points="1109,322.9531,1119,326.9531,1109,330.9531,1113,326.9531" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="870" x2="1115" y1="326.9531" y2="326.9531"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="227" x="877" y="321.8872">getSocketContextUpgradeFactory()</text><rect fill="#FEFECE" filter="url(#f1v8lkba356yk4)" height="46.5938" style="stroke: #A80036; stroke-width: 1.5;" width="123" x="1121" y="305.8203"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="102" x="1131.5" y="325.8154">SocketContext</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="109" x="1128" y="342.1123">UpgradeFactory</text><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="870" x2="912" y1="393.5469" y2="393.5469"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="912" x2="912" y1="393.5469" y2="406.5469"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="865" x2="912" y1="406.5469" y2="406.5469"/><polygon fill="#A80036" points="875,402.5469,865,406.5469,875,410.5469,871,406.5469" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="194" x="877" y="388.481">socketContextUpgradeFactory</text><polygon fill="#A80036" points="1172.5,426.6797,1182.5,430.6797,1172.5,434.6797,1176.5,430.6797" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="865" x2="1178.5" y1="430.6797" y2="430.6797"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="109" x="872" y="425.6138">prepare(req, res)</text><polygon fill="#A80036" points="648,462.8125,638,466.8125,648,470.8125,644,466.8125" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="642" x2="859" y1="466.8125" y2="466.8125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="194" x="654" y="461.7466">socketContextUpgradeFactory</text><polygon fill="#A80036" points="415,507.0781,405,511.0781,415,515.0781,411,511.0781" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="409" x2="626" y1="511.0781" y2="511.0781"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="133" x="421" y="490.8794">switchSocketContext</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="204" x="421" y="506.0122">(socketContextUpgradeFactory)</text><polygon fill="#A80036" points="1167.5,536.2109,1177.5,540.2109,1167.5,544.2109,1171.5,540.2109" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="404" x2="1173.5" y1="540.2109" y2="540.2109"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="41" x="411" y="535.145">create</text><path d="M1111,555.2109 L1490,555.2109 L1490,562.2109 L1480,572.2109 L1111,572.2109 L1111,555.2109 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="78.7266" style="stroke: #000000; stroke-width: 2.0;" width="384" x="1111" y="555.2109"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="334" x="1126" y="568.2778">Prepare and create a SocketContextUpgrade</text><polygon fill="#A80036" points="1246,589.4766,1256,593.4766,1246,597.4766,1250,593.4766" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1189.5" x2="1252" y1="593.4766" y2="593.4766"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="41" x="1196.5" y="588.4106">create</text><rect fill="#FEFECE" filter="url(#f1v8lkba356yk4)" height="46.5938" style="stroke: #A80036; stroke-width: 1.5;" width="116" x="1258" y="572.3438"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="102" x="1265" y="592.3389">SocketContext</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="59" x="1286.5" y="608.6357">Upgrade</text><polygon fill="#A80036" points="415,658.0703,405,662.0703,415,666.0703,411,662.0703" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="409" x2="1183.5" y1="662.0703" y2="662.0703"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="147" x="421" y="657.0044">socketContextUpgrade</text><polygon fill="#A80036" points="123,702.3359,113,706.3359,123,710.3359,119,706.3359" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="117" x2="393" y1="706.3359" y2="706.3359"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="133" x="129" y="686.1372">switchSocketContext</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="204" x="129" y="701.27">(socketContextUpgradeFactory)</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="112" x2="154" y1="735.4688" y2="735.4688"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="154" x2="154" y1="735.4688" y2="748.4688"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="113" x2="154" y1="748.4688" y2="748.4688"/><polygon fill="#A80036" points="123,744.4688,113,748.4688,123,752.4688,119,748.4688" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="258" x="119" y="730.4028">socketContext = socketContextUpgrade</text><polygon fill="#A80036" points="382,758.4688,392,762.4688,382,766.4688,386,762.4688" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="107" x2="388" y1="762.4688" y2="762.4688"/><polygon fill="#A80036" points="615,787.6016,625,791.6016,615,795.6016,619,791.6016" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="399" x2="621" y1="791.6016" y2="791.6016"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="147" x="406" y="786.5356">socketContextUpgrade</text><polygon fill="#A80036" points="410,801.6016,400,805.6016,410,809.6016,406,805.6016" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="404" x2="631" y1="805.6016" y2="805.6016"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="399" x2="441" y1="824.6016" y2="824.6016"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="441" x2="441" y1="824.6016" y2="837.6016"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="394" x2="441" y1="837.6016" y2="837.6016"/><polygon fill="#A80036" points="404,833.6016,394,837.6016,404,841.6016,400,837.6016" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="118,842.6016,108,846.6016,118,850.6016,114,846.6016" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="112" x2="388" y1="846.6016" y2="846.6016"/><polygon fill="#A80036" points="14,856.6016,4,860.6016,14,864.6016,10,860.6016" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="8" x2="101" y1="860.6016" y2="860.6016"/><polygon fill="#A80036" points="85,885.7344,95,889.7344,85,893.7344,89,889.7344" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="3" x2="91" y1="889.7344" y2="889.7344"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="75" x="10" y="884.6685">readEvent()</text><polygon fill="#A80036" points="1301,914.8672,1311,918.8672,1301,922.8672,1305,918.8672" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="107" x2="1307" y1="918.8672" y2="918.8672"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="137" x="114" y="913.8013">onReceiveFromPeer()</text><path d="M1248,933.8672 L1390,933.8672 L1390,940.8672 L1380,950.8672 L1248,950.8672 L1248,933.8672 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="86.2656" style="stroke: #000000; stroke-width: 2.0;" width="182" x="1248" y="933.8672"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="97" x="1263" y="946.9341">Process data</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="1323" x2="1370" y1="967.1328" y2="967.1328"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1370" x2="1370" y1="967.1328" y2="980.1328"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1329" x2="1370" y1="980.1328" y2="980.1328"/><polygon fill="#A80036" points="1339,976.1328,1329,980.1328,1339,984.1328,1335,980.1328" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="83" x="1335" y="962.0669">process data</text><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1328" x2="1370" y1="1004.1328" y2="1004.1328"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1370" x2="1370" y1="1004.1328" y2="1017.1328"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1323" x2="1370" y1="1017.1328" y2="1017.1328"/><polygon fill="#A80036" points="1333,1013.1328,1323,1017.1328,1333,1021.1328,1329,1017.1328" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="118,1029.1328,108,1033.1328,118,1037.1328,114,1033.1328" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="112" x2="1317" y1="1033.1328" y2="1033.1328"/><polygon fill="#A80036" points="14,1043.1328,4,1047.1328,14,1051.1328,10,1047.1328" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="8" x2="101" y1="1047.1328" y2="1047.1328"/><!--MD5=[9889040f789de57371691cbd0c30e651]
@startuml inline_umlgraph_3.svg
skinparam handwritten false
participant "SocketConnection" as scn
participant "SocketContext" as sc
participant "Response" as res
participant "SocketContext\nUpgradeFactory\nSelector" as scufs

-> scn ++ : readEvent()
  scn -> sc ++ : onReceiveFromPeer()
    sc -> sc ++ : process data
      sc -> res ++ : upgrade(req)
        res -> scufs ++ : select(req, *this)
          group Activate SocketContextUpgradeFactory
            scufs -> scufs ++ : select(upgradeContextName)
              scufs -> "SocketContext\nUpgradeFactory" as scuf ** : getSocketContextUpgradeFactory()
            return socketContextUpgradeFactory
            scufs -> scuf : prepare(req, res)
          end
        return socketContextUpgradeFactory
        res -> sc ++ : switchSocketContext\n(socketContextUpgradeFactory)
          sc -> scuf ++ : create
            group Prepare and create a SocketContextUpgrade
              scuf -> "SocketContext\nUpgrade" as scu ** : create
            end
          return socketContextUpgrade
          sc -> scn ++ : switchSocketContext\n(socketContextUpgradeFactory)
            scn -> scn : socketContext = socketContextUpgrade
          return
        return socketContextUpgrade
      return
    return
  return
return
-> scn ++ : readEvent()
  scn -> scu ++ : onReceiveFromPeer()
    group Process data
      scu -> scu ++ : process data
      return
    end
  return
return
@enduml

PlantUML version 1.2020.02(Sun Mar 01 11:22:07 CET 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 11.0.16+8-post-Debian-1
Operating System: Linux
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>